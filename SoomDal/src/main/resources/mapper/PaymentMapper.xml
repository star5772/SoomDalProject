<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="paymentMapper">
	
	<insert id="insertToPayment">
		insert into RequestPayment(p_code,p_money,d_mno,f_no,d_email)
		values(#{pCode},#{pMoney},#{dMno},#{fNo},#{dEmail})
	</insert>
	
	<delete id="deleteToPayment">
		delete from requestpayment where d_email = #{dEmail} and rownum=1
	</delete>
	
	<select id="findByPayment" resultType="RequestPayment">
		select p_code pCode,p_money pMoney,d_mno dMno,f_no fNo,d_email dEmail
		from requestpayment
		where dEmail=#{dEmail} and rownum=1		
	</select>

	<select id="findPaymentCode" resultType="string">
		select p_code from requestpayment where d_email=#{dEmail} and rownum=1
	</select>
	
	<select id="findAllByPayment" resultType="RequestPayment">
		<![CDATA[
			select * from			
				(select r.* , rownum rnum from
					(select p_code pCode,p_money pMoney,f_no fNo,d_email dEmail from requestpayment) r
				where rownum <=#{endRowNum})
			where rnum >=#{startRowNum}
		]]>			
	</select>
		
	<select id="countToPayment" resultType="int">
		select count(*) from requestpayment
	</select>	
	
	<select id="findToCash" resultType="int">
		select p_money from requestPayment where p_code=#{pCode} and rownum=1
	</select>
</mapper>












