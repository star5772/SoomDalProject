<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="adminMapper">

	<!-- 제자회원 목록출력(jeja) : 이름, 아이디, 전화번호, 신고당한횟수, 정지여부 -->
	<select id="findAllToJeja" resultType="jeja">
		select j_mno jMno, j_email jEmail, j_name jName, j_tel jTel, j_accusation jAccusation, enabled
		from jeja
	</select>
	
	<!-- 달인회원 목록 출력(dalin): 이름, 아이디, 전화번호, 분야, 활동지역, 정지여부  -->
	<select id="findAllToDalin" resultType="dalin">
		select  d_mno dMno, d_email dEmail, d_tel dTel, f_no fNo, d_area aArea, enabled
		from dalin
	</select>
	
	<!-- 신고게시물(ReportedBoard) 목록  : 불러오는거 (이네이블드가 false만 읽는거)-->
	<select id="findAllToReportedBoard" resultType="RequestBoard">
		select rb_No rbNo, rb_title rbTitle, rb_writer rbWriter, rb_report_cnt rbReportCnt, j_mno jMno
		from requestBoard
		where rb_enabled=0 
	</select>
	
	<!-- 신고회원 (제자) 목록 출력(아이디, 신고당한 횟수, 신고사유로 정렬) -->
	<select id="findAllJejaReported" resultType="map">
		select j.j_mno jMno, j.j_email jEmail, r.j_accusation jAccusation,
		from jeja j, reportedUser r
		where j.j_mno=#{jMno} and r.j_mno=#{jMno}
	</select>
	
	<!-- 회원 정지 -->	
	<update id="updateToEnabled" >
		update jeja 
		set enabled=#{enabled} 
		where j_email=#{jEmail} and rownum=1
	</update>

	<!-- 환불(NowRefund) -->
	<update id="updateToRefund">
		update nowrefund 
		set p_refund_is_ok=#{pRefundIsOk} 
		where p_refund_code=#{pRefundCode} and rownum=1
	</update>
	

	

	
</mapper>












