<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="requestMapper">

	<insert id="insertToRequest">
		<selectKey keyProperty="rNo" order="BEFORE" resultType="int">
			select request_seq.nextval from dual
		</selectKey>
		insert into request(r_no,j_mno,r_field,r_subject,r_lesson_purpose,
		r_your_level,r_item_exists,r_lesson_type,r_want_date,r_want_time,r_age,
		r_gender,r_dalin_is_ok,r_wannable,r_want_area,r_write_date,
		d_mno,rb_enabled)
		values(#{rNo},#{jMno},#{rField},#{rSubject},#{rLessonPurpose},
		#{rYourLevel},#{rItemExists},#{rLessonType},#{rWantDate},#{rWantTime},
		#{rAge},#{rGender},0,#{rWannable},#{rWantArea},sysdate,#{dMno},1)
	</insert>
	
	<select id="findByRequest" resultType="request">
		select * from request where r_no=#{rNo} and rownum=1
	</select>
	
	<select id="findAllByRequest" resultType="request">
		<![CDATA[
			select * from
				(select r.* ,rownum rnum from
					(select * from request where j_mno = #{jMno}) r
				where rownum<=#{endRowNum})
			where rnum>=#{startRowNum}
		]]>	
	</select>
	
	<delete id="deleteToRequest">
		delete from request where r_no=#{rNo} and rownum=1
	</delete>
	
</mapper>












